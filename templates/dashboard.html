{% extends "base.html" %}
{% block title %}Dashboard HR{% endblock %}

{% block content %}

<!-- ğŸ” Bá»™ lá»c -->
<!-- Banner / HÃ¬nh áº£nh minh há»a -->
<div style="text-align:center; margin-bottom: 16px;">
    <img src="{{ url_for('static', filename='undraw_online-information_hhp2.svg') }}" alt="Dashboard Illustration"
        style="max-height: 180px;">
</div>

<!-- TiÃªu Ä‘á» + Tá»•ng sá»‘ -->
<div style="position: relative; max-width: 880px; margin: 0 auto 24px auto; height: 40px;">
    <!-- Dashboard á»Ÿ giá»¯a -->
    <h2 style="
        position: absolute;
        left: 50%;
        transform: translateX(-50%);
        color: #4FC3F7;
        margin: 0;">
        ğŸ“‹ Dashboard á»¨ng viÃªn
    </h2>

    <!-- Tá»•ng á»©ng viÃªn á»Ÿ bÃªn pháº£i -->
    <div style="position: absolute; right: 0; top: 4px; color: #81C784; font-size: 1.1em;">
        ğŸ‘¥ Tá»•ng á»©ng viÃªn: <b style="color:#FFD54F;">{{ resumes | length }}</b>
    </div>
</div>


<!-- Bá»™ lá»c gá»n gÃ ng -->
<div
    style="max-width: 880px; margin: 0 auto 32px auto; background: #1e1e2f; border-radius: 10px; border:1px solid #333; padding: 20px;">
    <form method="GET" style="display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 16px;">

        <!-- Ã” tÃ¬m kiáº¿m -->
        <input type="text" name="search" value="{{ request.args.get('search','') }}"
            placeholder="ğŸ” TÃ¬m theo tÃªn, email, ká»¹ nÄƒng..."
            style="grid-column: 1 / -1; background:#181A20; color:#EDEDED; border:1px solid #444; border-radius:6px; padding:10px; font-size:1em;">

        <!-- Lá»c theo ká»¹ nÄƒng -->
        <select name="skill"
            style="background:#181A20; color:#81C784; border:1px solid #444; border-radius:6px; padding:10px; font-size:1em;">
            <option value="">-- Ká»¹ nÄƒng --</option>
            {% for skill in all_skills %}
            <option value="{{ skill }}" {% if request.args.get('skill')==skill %}selected{% endif %}>{{ skill }}
            </option>
            {% endfor %}
        </select>

        <!-- Lá»c theo vá»‹ trÃ­ -->
        <select name="filter"
            style="background:#181A20; color:#FFD54F; border:1px solid #444; border-radius:6px; padding:10px; font-size:1em;">
            <option value="">-- Vá»‹ trÃ­ --</option>
            {% for pos in positions %}
            <option value="{{ pos }}" {% if request.args.get('filter')==pos %}selected{% endif %}>{{ pos }}</option>
            {% endfor %}
        </select>

        <!-- KN tá»‘i thiá»ƒu -->
        <input type="number" name="min_exp" value="{{ request.args.get('min_exp', '') }}" min="0" max="20"
            placeholder="KN tá»‘i thiá»ƒu"
            style="background:#181A20; color:#FFF176; border:1px solid #444; border-radius:6px; padding:10px; font-size:1em;">

        <!-- NÃºt lá»c -->
        <button type="submit"
            style="background:#4FC3F7; color:#000; border:none; border-radius:6px; padding:10px; font-size:1em; cursor:pointer;">
            ğŸ” Lá»c
        </button>
    </form>
</div>


<!-- Tá»•ng sá»‘ á»©ng viÃªn -->
<h2 style="text-align:center; color:#4FC3F7; margin-bottom:24px;">
    <span style="font-size:1.3em;">ğŸ“‹</span> Danh sÃ¡ch á»©ng viÃªn
</h2>

<!-- ğŸ“‹ Danh sÃ¡ch á»©ng viÃªn -->
<div
    style="display: grid; grid-template-columns: repeat(auto-fit, minmax(340px, 1fr)); gap: 24px; max-width: 1200px; margin: auto;">
    {% for cv in resumes %}
    <div class="card"
        style="background:#2a2a3b; color:white; padding:16px; border-radius:10px; box-shadow: 0 2px 8px rgba(0,0,0,0.3); display: flex; flex-direction: column; justify-content: space-between;">

        <div style="display: flex; gap: 16px;">
            <div>
                <p><b style="color:#90CAF9;">ğŸ‘¤ Há» tÃªn:</b> {{ cv.full_name }}</p>
                <p><b style="color:#FFD54F;">ğŸ’¼ Vá»‹ trÃ­:</b> {{ cv.last_job_title }}</p>
                <p><b style="color:#4FC3F7;">â³ Kinh nghiá»‡m:</b> {{ cv.experience if cv.experience is not none else 0 }}
                    nÄƒm</p>
                <p><b style="color:#FBC02D;">ğŸ“§ Email:</b> {{ cv.email }}</p>
                <p><b style="color:#81C784;">ğŸ’¡ Ká»¹ nÄƒng:</b> {{ cv.skills | join(', ') }}</p>
            </div>
        </div>

        <div class="actions" style="margin-top:18px; display:flex; gap: 10px;">
            <a href="{{ url_for('hr.detail', id=cv._id) }}" class="btn btn-detail"
                style="flex:1; background:#4FC3F7; color:#000; padding:8px 12px; border-radius:6px; text-align:center; text-decoration:none;">ğŸ“„
                Xem chi tiáº¿t</a>
            <a href="{{ url_for('hr.edit', id=cv._id) }}" class="btn btn-edit"
                style="flex:1; background:#FFD54F; color:#000; padding:8px 12px; border-radius:6px; text-align:center; text-decoration:none;">âœï¸
                Sá»­a</a>
            <a href="{{ url_for('hr.delete', id=cv._id) }}" class="btn btn-delete"
                onclick="return confirm('Báº¡n cÃ³ cháº¯c cháº¯n muá»‘n xoÃ¡ á»©ng viÃªn nÃ y khÃ´ng?')"
                style="flex:1; background:#E57373; color:#fff; padding:8px 12px; border-radius:6px; text-align:center; text-decoration:none;">ğŸ—‘ï¸
                XoÃ¡</a>
        </div>
    </div>
    {% else %}
    <p style="color:#EDEDED; grid-column: 1 / -1; text-align: center;">KhÃ´ng cÃ³ á»©ng viÃªn nÃ o.</p>
    {% endfor %}
</div>
{% endblock %}